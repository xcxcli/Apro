"use strict";module.exports=(()=>{let e=e=>"function"==typeof e,t=k=>null!==k&&("object"==typeof k||e(k));class l{constructor(t){if(this.d=[],this.s=0,this.r=0,!e(t))throw new TypeError;try{t(this.a.bind(this),this.b.bind(this))}catch(e){this.b(e)}}then(e,t){return new l((l,r)=>{this.c({c:l,d:r,a:e,b:t})})}catch(e){return this.then(null,e)}finally(e){return this.then(e,e)}c(t){if(0===this.s)return void this.d.push(t);let l=1===this.s,r=l?t.a:t.b;setTimeout(()=>{if(!e(r))return void t[l?"c":"d"](this.v);let s,i=t.c;try{s=r(this.v)}catch(e){s=e,this.s=2,i=t.d}i(s)})}a(l,r=0){if(0!==this.s||this.r!==r)return;if(l===this)return void this.b(new TypeError);let s=++this.r;if(t(l))try{let t=l.then;if(e(t))return void t.call(l,e=>{this.a(e,s)},e=>{this.b(e,s)})}catch(e){return void this.b(e,s)}this.s=1,this.v=l,this.d.forEach(e=>this.c(e))}b(e,t=0){0===this.s&&this.r===t&&(this.s=2,this.v=e,this.d.forEach(e=>this.c(e)))}static resolve(e){return e instanceof l?e:z.then(()=>e)}static reject(e){return z.then(()=>{throw e})}static all(e){return new l((t,r)=>{let s=e.length,i=[];e.forEach((e,n)=>l.resolve(e).then(e=>{i[n]=e,--s||t(i)},e=>r(e)))})}static allSettled(e){return new l(t=>{let r=e.length,s=[];e.forEach((e,i)=>l.resolve(e).finally(e=>{s[i]=e,--r||t(s)}))})}static race(e){return new l((t,r)=>{e.forEach(e=>l.resolve(e).then(e=>t(e),e=>r(e)))})}}let z=new l(e=>e());return l})();